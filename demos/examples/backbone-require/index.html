
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>jQuery Mobile - Applications Backbone.js et Require.js</title>
	<link rel="stylesheet"  href="../../css/themes/default/jquery.mobile.min.css">
	<link rel="stylesheet" href="../../_assets/css/jqm-demos.css">
	<link rel="shortcut icon" href="../../favicon.ico">
	<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,700">
	<script src="../../js/jquery.js"></script>
	<script src="../../_assets/js/index.js"></script>
	<script src="../../js/jquery.mobile.min.js"></script>

</head>
<body>
<div data-role="page" class="jqm-demos" data-quicklinks="true">

    <div data-role="header" class="jqm-header">
		<h1 class="jqm-logo"><a href="../../"><img src="../../_assets/img/jquery-logo.png" alt="Framework jQuery Mobile"></a></h1>
        <a href="#" class="jqm-navmenu-link" data-icon="bars" data-iconpos="notext">Navigation</a> <a href="#" class="jqm-search-link" data-icon="search" data-iconpos="notext">Recherche</a> <?php include( '../../search.html' ); ?>
    </div><!-- /header -->

	<div data-role="content" class="jqm-content">

      <h1>jQuery Mobile, Backbone.js et Require.js</h1>
      <p class="jqm-intro">jQuery Mobile fournit une  <strong>interface utilisateur basé sur HTML5 pour toutes les plateformes des appareils mobiles les plus populaires</strong>, mais il n'a aucune influence sur la façon dont vous organiser et structurer le JavaScript de votre application. Beaucoup d'utilisateurs de jQuery Mobile se tournent vers d'autres bibliothèques populaires tierces, comme des frameworks MV* et des outils de gestion dépendants, pour aider à structurer leur code.
      </p>

	  <h2>Backbone.js et Require.js</h2>
      <p><strong>Backbone.js</strong> et <strong>Require.js</strong> sont deux bibliothèques tierces très populaires qui sont utilisées avec jQuery Mobile pour fournir une couche de technologie riche en JavaScript pour les développeurs.
      </p>
      <p><strong>Backbone.js</strong> est un bon framework JavaScript MV* côté client qui fournit une structure pour les applications JavaScript en fournissant Vue, Modèle, Collection, Routeur et des objets de classe Événements.
      </p>
      <p><strong>Require.js</strong> propose quelques objectifs différents de ceux Backbone.js. Require.js est un chargeur de script AMD (Asynchronous Module Definition) qui charge votre Javascript en asynchrone pour améliorer les performances de chargement des pages, tout en manageant la dépendance de script et vous permettant d'organiser votre JavaScript dans des modules (fichiers).
      </p>
      <p>Bien qu'il existe un grand intérêt d'utiliser ensemble jQuery Mobile, Backbone.js et Require.js, il y a une forte barrière en entrée. Beaucoup d'utilisateurs confondent la façon d'utiliser l'objet de classe Router de Backbone.js avec le système de routage de jQuery Mobile.</p>

	<a href="backbone-require.html" rel="external" data-role="button" data-icon="arrow-r" data-iconpos="right" data-inline="true">Voir la page d'exemple</a>

      <h2>Configuration de jQuery Mobile</h2>

      <p>La technique utilisée dans cette <a href="backbone-require.html" rel="external">page d'exemple</a> est loin d'être la seule technique disponible, mais c'est l'une des plus élégantes. Le router de Backbone.js est utilisé exclusivement pour gérer tous les événements de hashchange et la méthode <code>$.mobile.changePage()</code> de  jQuery Mobile est utilisée pour changer par programmation la page.</p>

      <p>Voici deux propriétés internes de jQuery Mobile qui sont désactivées pour permettre que cela se produise :</p>

      <ul>
        <li><code>$.mobile.linkBindingEnabled</code>
          <ul>
            <li>jQuery Mobile liera automatiquement les clics sur les balises d'ancrage dans votre document. Le paramétrage de cette option à false empêchera  tous les ancrages à l'ajout en gérant le clic de l'état du bouton actif et de lien alternatif flouté. Cela ne devrait être utilisé que lorsque l'on tente de déléguer la gestion du clic à une autre bibliothèque ou un code personnalisé.</li>
            </ul>
        </li>
        <li><code>$.mobile.hashListeningEnabled</code>
          <ul>
            <li>jQuery Mobile écoutera et gérera automatiquement les changements vers location.hash. La désactivation empêchera jQuery Mobile de manipuler les changements de hash, ce qui vous permet de le gérer vous-même, ou d'utiliser de simples liens dans un document qui défilent vers un ID particulier.</li>
            </ul>
        </li>
      </ul>
      </p>

	  <h2>Exemple de code de page</h2>
      <p>Pour illustrer la manière dont les propriétés internes ci-dessus de jQuery Mobile sont désactivées, examinons le code de notre exemple.</p>

      <p>A l'intérieur de la section <em>head</em> de notre page <strong>index.html</strong>, nous avons d'abord inclus la bibliothèque JavaScript Require.js et défini l'attribut <strong>data-main</strong> dans notre balise de script du fichier JavaScript où nous voulons Require.js pour l'inclure sur la première page (ce fichier contiendra toutes nos configurations Require.js). Dans cet exemple, nous appelons Require.js pour regarder à l'intérieur du répertoire js et charger <strong>mobile.js</strong>.
      </p>

      <code>
        
        &lt;head&gt;
          &lt;script src="js/libs/require.js" data-main="js/mobile"&gt;&lt;/script&gt;
        &lt;/head&gt;
      
      </code>
      <p>Si nous regardons à l'intérieur de <strong>mobile.js</strong>, nous trouverons que les attributs jQuery Mobile <code>$.mobile.linkBindingEnabled</code> et <code>$.mobile.hashListeningEnabled</code> définis à false.
      </p>
      <pre>
      <code>
      // Définit la configuration de require.js pour votre application.
      require.config( {

        // 3rd party script alias names (Easier to type "jquery" than "libs/jquery-1.8.3.min")
        paths: {

            // Libraries principales
            "jquery": "libs/jquery",
            "jquerymobile": "libs/jquerymobile",
            "underscore": "libs/lodash",
            "backbone": "libs/backbone"

        },

        // Définit la configuration des scripts tiers pour vos scripts tiers qui ne sont pas compatible AMD
        shim: {

            "backbone": {
                  "deps": [ "underscore", "jquery" ],
                  "exports": "Backbone"  //attaches "Backbone" to the window object
            }

        } // end Shim Configuration

      } );

      // Inclus les dépendances de fichier
      require([ "jquery","backbone","routers/mobileRouter","jquerymobile" ], function( $, Backbone, Mobile ) {

        //Empêche toute manipulation de clic sur les ancres
        $.mobile.linkBindingEnabled = false;

        // La désactivation de ceci, empêchera jQuery Mobile de traiter des changements de hash
        $.mobile.hashListeningEnabled = false;

        // Instancie un nouveau Routeur Mobile de Backbone.js
        this.router = new Mobile();

      } );
</code>
</pre>
<p>Ensuite, à l'intérieur de l'objet de classe du Routeur de Backbone.js, nous pouvons répondre aux événements haschange et appeler manuellement la méthode jQuery Mobile <code>changePage()</code>. Voici un petit extrait de <strong>mobileRouter.js</strong>.</p>
<pre>
<code>
        // Backbone.js Routes
        routes: {

            // Quand il n'y a pas de hash sur l'url, la méthode home est appelée
            "": "home",

            // Quand #category? est sur l'url, la méthode category est appelée
            "category?:type": "category"

        },

        // Méthode home
        home: function() {

            // Change par programmation vers la page categories
            $.mobile.changePage( "#categories" , { reverse: false, changeHash: false } );

        }
</code>
</pre>
<p>
La <a href="backbone-require.html" rel="external">page d'exemple</a> illustre comment rendre une ListView de jQuery Mobile remplie avec des données JSON dynamiques de manière asynchrone. N'hésitez pas à regarder plus en détail dans le code source pour voir comment Require.js et Backbone.js sont utilisés.
</p>

	</div><!-- /content -->

    <div data-role="footer" class="jqm-footer">
        <p class="jqm-version"></p>
        <p>Copyright 2013 The jQuery Foundation</p>
    </div><!-- /footer -->
    <div data-role="panel" class="jqm-nav-panel jqm-navmenu-panel" data-position="left" data-display="reveal" data-theme="c">
        <ul data-role="listview" data-theme="d" data-divider-theme="d" data-icon="false" data-global-nav="demos" class="jqm-list">
            <li data-role="list-divider">Navigation jquery-fr.com</li>
			      <li><a href="http://www.jquery-fr.com" rel="external">Documentation française jQuery</a></li>
            <li><a href="http://www.jquery-fr.com/forum" rel="external">Forum français dédié à jQuery</a></li>
            <li data-role="list-divider">Démos jQuery Mobile</li>
			<li><a href="./">Accueil</a></li>
            <li><a href="intro/">Introduction</a></li>
            <li><a href="examples/">Plusieurs démos</a></li>
            <li><a href="faq/">Questions &amp; Réponses</a></li>
			<li><a href="intro/rwd.html">Devenir Responsive</a></li>
            <li data-role="list-divider">Référence Widget</li>
<li data-section="Widgets" data-filtertext="accordions collapsible sets content formatting grouped inset mini"><a href="widgets/accordions/">Accordéon</a></li>

<li data-section="Widgets" data-filtertext="ajax navigation navigate event method"><a href="widgets/navigation/" data-ajax="false">Navigation AJAX</a></li>

<li data-section="Widgets" data-filtertext="autocomplete filter reveal listviews remote listviewbeforefilter placeholder"><a href="widgets/autocomplete/" data-ajax="false">Autocomplete</a></li>

<li data-section="Widgets" data-filtertext="buttons inputs forms inline theme grouped icons mini disabled"><a href="widgets/buttons/" data-ajax="false">Boutons</a></li>

<li data-section="Widgets" data-filtertext="checkboxes checkboxradio inputs forms mini disabled"><a href="widgets/checkbox/">Cases à cocher</a></li>

<li data-section="Widgets" data-filtertext="collapsibles content formatting"><a href="widgets/collapsibles/" data-ajax="false">Pliables</a></li>

<li data-section="Widgets" data-filtertext="controlgroups selects checkboxradio buttons horizontal vertical"><a href="widgets/controlgroups/">Controlgroup</a></li>

<li data-section="Widgets" data-filtertext="dialogs modal popups"><a href="widgets/dialog/">Boîtes de dialogue</a></li>

<li data-section="Widgets" data-filtertext="fixed toolbars headers footers sections fullscreen"><a href="widgets/fixed-toolbars/">Barres d'outils fixes</a></li>

<li data-section="Widgets" data-filtertext="flip toggle switch binary slider selects forms disabled"><a href="widgets/sliders/switch.html" data-ajax="false">Interrupteur</a></li>

<li data-section="Widgets" data-filtertext="footer toolbars footers sections"><a href="widgets/footers/">Barre d'outils de pied de page</a></li>

<li data-section="Widgets" data-filtertext="forms inputs slider button range toggle switch label disabled accessible fieldcontains elements"><a href="widgets/forms/">Éléments de formulaire</a></li>

<li data-section="Widgets" data-filtertext="grids columns blocks content formatting rwd responsive"><a href="widgets/grids/">Grilles</a></li>

<li data-section="Widgets" data-filtertext="header toolbars fixed fullscreen sections"><a href="widgets/headers/">Barre d'outils d'entête</a></li>

<li data-section="Widgets" data-filtertext="icons buttons disc position"><a href="widgets/icons/">Icônes</a></li>

<li data-section="Widgets" data-filtertext="links navigation ajax prefetch cache"><a href="widgets/links/">Liens</a></li>

<li data-section="Widgets" data-filtertext="listviews thumbnails icons nested split button collapsible ul ol"><a href="widgets/listviews/" data-ajax="false">Listes</a></li>

<li data-section="Widgets" data-filtertext="ajax loader overlay spinner pages"><a href="widgets/loader/" data-ajax="false">Chargeur</a></li>

<li data-section="Widgets" data-filtertext="navbars navmenu toolbars links icons footer header"><a href="widgets/navbar/" data-ajax="false">Barre de navigation</a></li>

<li data-section="Widgets" data-filtertext="navbars persistent header footer links navmenu"><a href="widgets/fixed-toolbars/footer-persist-a.html">Barre de navigation persistante</a></li>

<li data-section="Widgets" data-filtertext="pages single multipage templates ajax nav"><a href="widgets/pages/">Pages</a></li>

<li data-section="Widgets" data-filtertext="panels sliding nav modal transition display reveal overlay push rwd responsive"><a href="widgets/panels/">Panneaux <span class="ui-li-count">Nouveauté</span></a></li>

<li data-section="Widgets" data-filtertext="popup dialog modal transition tooltip lightbox form overlay screen flip pop fade transition"><a href="widgets/popup/">Popup</a></li>

<li data-section="Widgets" data-filtertext="radiobuttons checkboxradio inputs forms disabled grouped"><a href="widgets/radiobuttons/">Radio boutons</a></li>

<li data-section="Widgets" data-filtertext="selectmenus custom native multiple optgroup disabled forms"><a href="widgets/selects/">Sélection</a></li>

<li data-section="Widgets" data-filtertext="slider, single sliders range inputs forms disabled"><a href="widgets/sliders/" data-ajax="false">Curseur seule</a></li>

<li data-section="Widgets" data-filtertext="slider, dual range sliders rangesliders inputs forms disabled"><a href="widgets/sliders/rangeslider.html" data-ajax="false">Curseur, fourchette <span class="ui-li-count">Nouveau</span></a></li>

<li data-section="Widgets" data-filtertext="tables column th td toggle responsive tables rwd hide show tabular"><a href="widgets/table-column-toggle/">Table, column toggle <span class="ui-li-count">Nouveau</span></a></li>

<li data-section="Widgets" data-filtertext="tables reflow th td responsive rwd columns tabular"><a href="widgets/table-reflow/">Table, reflow <span class="ui-li-count">Nouveau</span></a></li>

<li data-section="Widgets" data-filtertext="text inputs textarea numeric email tel file date time month clear pattern placeholder forms"><a href="widgets/textinputs/">Textes de saisie &amp; zone de saisie</a></li>

<li data-section="Widgets" data-filtertext="page transitions animated pages ajax navigation flip slide fade pop" data-ajax="false"><a href="widgets/transitions/" data-ajax="false">Transitions</a></li>

        
        </ul>
	</div><!-- /panel -->




</div><!-- /page -->
</body>
</html>
