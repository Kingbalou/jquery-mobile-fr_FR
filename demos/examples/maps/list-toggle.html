<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Google Maps - Démos jQuery Mobile</title>
	<link rel="stylesheet"  href="../../css/themes/default/jquery.mobile.min.css">
	<style>
	.segmented-control { text-align:center; }
	.segmented-control .ui-controlgroup { display:inline; margin:.2em 0px; }
	
	#map-page { width:100%; height:100%; }
	#map-canvas { width:100%; height:100%; margin-top:-30px; padding:0px!important; }
	#gmap-marker-link { color:#00a0df; text-decoration:none; }
	
	.ui-gmap-canvas { width:100%; height:100%; }
	.ui-gmap-infobox { display:none; }
	
	#show-more .ui-li-heading { text-align:center; }
	#show-more .ui-icon { visibility:hidden; }
	
	.ui-li-has-count .ui-li-count { border-color:transparent; }
	.wrap { white-space:normal; }
	</style>
	<link rel="stylesheet" href="../../_assets/css/jqm-demos.css">
	<link rel="shortcut icon" href="../../favicon.ico">
	<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,700">
	<script src="../../js/jquery.js"></script>
	<script src="../../_assets/js/index.js"></script>
	<script src="../../js/jquery.mobile.min.js"></script><!-- Google Maps JS assets are loaded at bottom of page for performance -->
	
	<script>
	$( document ).on("pageinit", "#map-page", function() {
		var $mapSwitch = $( "#map-switch" ),
		    $listSwitch = $( "#list-switch" ),
			$map = $("#map-canvas"),
	        $list = $("#list-canvas");
			
	    $mapSwitch.on( "click", function(e){
	       	$map.show();
	       	$map.gmap();
	       	$list.hide();
	    });
		
	    $listSwitch.on( "click", function(e){
	       	$list.show();
			$map.hide();
	    });
	
	    $("#show-more a").on( "click", function(e){
			// Assume we already have a cached geolocation because it's not necessary for this example.
			var location = location || {};
			    location.coords = location.coords || {};
				location.coords.latitude = location.coords.latitude || {};
				location.coords.longitude = location.coords.longitude || {};
	    	
			JQM.geo.startIndex = $("#list-results li").size() -1; // exclude show more list item
	    	JQM.geo.showMore(location);
	    	e.preventDefault();
	    });
	});
	
	/**
	 * Geolocation configuration
	 */
	var JQM = JQM || {};
	JQM.geo = {
		location: "",
		zip: "",
		startIndex: "",
	
	    showMore: function(latlng) {
	    	$.mobile.loading( "show" );
	    	JQM.geo.location = latlng;
	
			$.ajax({
			  	url: "showMore.html?lat="+JQM.geo.location.coords.latitude+"&lon="+JQM.geo.location.coords.longitude+"&zip="+JQM.geo.zip+"&startIndex="+JQM.geo.startIndex,
			  	success: function( response ) {
			  		var $listResults = $( "#list-results" );
					$listResults.find( "#show-more" ).before(response);
					$listResults.listview( "refresh" );
					$.mobile.loading( 'hide' );
			  	},
				timeout: 6000,  // Timeout after 6 seconds
				error: function(jqXHR, textStatus, errorThrown) {
					console.log("Error, textStatus: " + textStatus + " errorThrown: "+ errorThrown);
					$.mobile.loading( "hide" );
				}
			});
	    }
	};
	</script>
</head>
<body>
<div data-role="page" class="jqm-demos">

	<div data-role="header" class="jqm-header">
		<h1 class="jqm-logo"><a href="../../"><img src="../../_assets/img/jquery-logo.png" alt="Framework jQuery Mobile"></a></h1>
		<a href="#" class="jqm-navmenu-link" data-icon="bars" data-iconpos="notext">Navigation</a> <a href="#" class="jqm-search-link" data-icon="search" data-iconpos="notext">Recherche</a> <?php include( '../../search.html' ); ?>
	</div><!-- /header -->

    <div data-role="content" class="jqm-content">

        <h1>Google Maps avec une liste</h1>

        <p>Dans cette démo, nous montrons comment vous pouvez :</p>
        <ul>
            <li>Créer un contrôle segmenté qui permet de basculer entre une liste et l'affichage de la carte.</li>
            <li>Comment transférer des données de géolocalisation d'une liste vers l'affichage de la carte.</li>
            <li>Comment charger plus de résultats dans la liste et comment dynamiquement, ajoutez à une liste existante.</li>
            <li>Comment afficher une boîte d'informations sur la carte quand un pont est choisi.</li>
        </ul>
        
        <a href="#map-page" class="jqm-button" data-ajax="false" data-role="button" data-inline="true" data-mini="true" data-icon="arrow-r" data-iconpos="right">Ouvrir la démo</a>

        <div data-demo-html="#map-page" data-demo-js="true" data-demo-css="true"></div><!--/demo-html -->

    </div><!-- /content -->

		<div data-role="footer" class="jqm-footer">
			<p class="jqm-version"></p>
			<p>Copyright 2013 The jQuery Foundation</p>
		</div><!-- /footer -->
    <div data-role="panel" class="jqm-nav-panel jqm-navmenu-panel" data-position="left" data-display="reveal" data-theme="c">
        <ul data-role="listview" data-theme="d" data-divider-theme="d" data-icon="false" data-global-nav="demos" class="jqm-list">
            <li data-role="list-divider">Navigation vers jquery-fr.com</li>
			      <li><a href="http://www.jquery-fr.com" rel="external">Documentation française jQuery</a></li>
            <li><a href="http://www.jquery-fr.com/forum" rel="external">Forum français dédié à jQuery</a></li>
            <li data-role="list-divider">Démos jQuery Mobile</li>
			<li><a href="./">Accueil</a></li>
            <li><a href="intro/">Introduction</a></li>
            <li><a href="examples/">Plusieurs démos</a></li>
            <li><a href="faq/">Questions &amp; Réponses</a></li>
			<li><a href="intro/rwd.html">Devenir Responsive</a></li>
            <li data-role="list-divider">Référence Widget</li>
<li data-section="Widgets" data-filtertext="accordions collapsible sets content formatting grouped inset mini"><a href="widgets/accordions/">Accordéon</a></li>

<li data-section="Widgets" data-filtertext="ajax navigation navigate event method"><a href="widgets/navigation/" data-ajax="false">Navigation AJAX</a></li>

<li data-section="Widgets" data-filtertext="autocomplete filter reveal listviews remote listviewbeforefilter placeholder"><a href="widgets/autocomplete/" data-ajax="false">Autocomplete</a></li>

<li data-section="Widgets" data-filtertext="buttons inputs forms inline theme grouped icons mini disabled"><a href="widgets/buttons/" data-ajax="false">Boutons</a></li>

<li data-section="Widgets" data-filtertext="checkboxes checkboxradio inputs forms mini disabled"><a href="widgets/checkbox/">Cases à cocher</a></li>

<li data-section="Widgets" data-filtertext="collapsibles content formatting"><a href="widgets/collapsibles/" data-ajax="false">Pliables</a></li>

<li data-section="Widgets" data-filtertext="controlgroups selects checkboxradio buttons horizontal vertical"><a href="widgets/controlgroups/">Controlgroup</a></li>

<li data-section="Widgets" data-filtertext="dialogs modal popups"><a href="widgets/dialog/">Boîtes de dialogue</a></li>

<li data-section="Widgets" data-filtertext="fixed toolbars headers footers sections fullscreen"><a href="widgets/fixed-toolbars/">Barres d'outils fixes</a></li>

<li data-section="Widgets" data-filtertext="flip toggle switch binary slider selects forms disabled"><a href="widgets/sliders/switch.html" data-ajax="false">Interrupteur</a></li>

<li data-section="Widgets" data-filtertext="footer toolbars footers sections"><a href="widgets/footers/">Barre d'outils de pied de page</a></li>

<li data-section="Widgets" data-filtertext="forms inputs slider button range toggle switch label disabled accessible fieldcontains elements"><a href="widgets/forms/">Éléments de formulaire</a></li>

<li data-section="Widgets" data-filtertext="grids columns blocks content formatting rwd responsive"><a href="widgets/grids/">Grilles</a></li>

<li data-section="Widgets" data-filtertext="header toolbars fixed fullscreen sections"><a href="widgets/headers/">Barre d'outils d'entête</a></li>

<li data-section="Widgets" data-filtertext="icons buttons disc position"><a href="widgets/icons/">Icônes</a></li>

<li data-section="Widgets" data-filtertext="links navigation ajax prefetch cache"><a href="widgets/links/">Liens</a></li>

<li data-section="Widgets" data-filtertext="listviews thumbnails icons nested split button collapsible ul ol"><a href="widgets/listviews/" data-ajax="false">Listes</a></li>

<li data-section="Widgets" data-filtertext="ajax loader overlay spinner pages"><a href="widgets/loader/" data-ajax="false">Chargeur</a></li>

<li data-section="Widgets" data-filtertext="navbars navmenu toolbars links icons footer header"><a href="widgets/navbar/" data-ajax="false">Barre de navigation</a></li>

<li data-section="Widgets" data-filtertext="navbars persistent header footer links navmenu"><a href="widgets/fixed-toolbars/footer-persist-a.html">Barre de navigation persistante</a></li>

<li data-section="Widgets" data-filtertext="pages single multipage templates ajax nav"><a href="widgets/pages/">Pages</a></li>

<li data-section="Widgets" data-filtertext="panels sliding nav modal transition display reveal overlay push rwd responsive"><a href="widgets/panels/">Panneaux <span class="ui-li-count">Nouveauté</span></a></li>

<li data-section="Widgets" data-filtertext="popup dialog modal transition tooltip lightbox form overlay screen flip pop fade transition"><a href="widgets/popup/">Popup</a></li>

<li data-section="Widgets" data-filtertext="radiobuttons checkboxradio inputs forms disabled grouped"><a href="widgets/radiobuttons/">Radio boutons</a></li>

<li data-section="Widgets" data-filtertext="selectmenus custom native multiple optgroup disabled forms"><a href="widgets/selects/">Sélection</a></li>

<li data-section="Widgets" data-filtertext="slider, single sliders range inputs forms disabled"><a href="widgets/sliders/" data-ajax="false">Curseur seule</a></li>

<li data-section="Widgets" data-filtertext="slider, dual range sliders rangesliders inputs forms disabled"><a href="widgets/sliders/rangeslider.html" data-ajax="false">Curseur, fourchette <span class="ui-li-count">Nouveau</span></a></li>

<li data-section="Widgets" data-filtertext="tables column th td toggle responsive tables rwd hide show tabular"><a href="widgets/table-column-toggle/">Table, column toggle <span class="ui-li-count">Nouveau</span></a></li>

<li data-section="Widgets" data-filtertext="tables reflow th td responsive rwd columns tabular"><a href="widgets/table-reflow/">Table, reflow <span class="ui-li-count">Nouveau</span></a></li>

<li data-section="Widgets" data-filtertext="text inputs textarea numeric email tel file date time month clear pattern placeholder forms"><a href="widgets/textinputs/">Textes de saisie &amp; zone de saisie</a></li>

<li data-section="Widgets" data-filtertext="page transitions animated pages ajax navigation flip slide fade pop" data-ajax="false"><a href="widgets/transitions/" data-ajax="false">Transitions</a></li>

        
        </ul>
	</div><!-- /panel -->


	

	</div><!-- /page -->

	<div data-role="page" id="map-page">
		<div data-role="header" data-position="fixed">
			<div class="segmented-control ui-bar-d">
		 	<fieldset data-role="controlgroup" data-type="horizontal" data-mini="true">
	  			<input type="radio" name="switch" id="list-switch" checked="true"/>
				<label for="list-switch">Liste</label>
	         	<input type="radio" name="switch" id="map-switch" />
	         	<label for="map-switch">Carte</label>
		    </fieldset>
			</div>
		</div>
		<div data-role="content" class="ui-content-list">	
	        <div id="list-canvas">
	            <ul id="list-results" data-role="listview">
	            	<li data-marker-info="44.811805,-93.176352">
					  <div style="display:none;">
					    <div class="ui-gmap-marker-info">
					  	  <h1><a id="gmap-marker-link" href="#">Fast Clinic</a></h1>
					  	  <p>8888 Fast Rd</p>
					  	</div>
					  </div>
	            	  <a href="#">
	            	  	<h1 class="ui-gmap-marker-title wrap">Fast Clinic</h1>
	            	  	</a><div class="ui-li-count">
	            	  		<span>0.71 miles</span>
	            	  	</div>
	            	  </a>
	            	</li>
	            	<li data-marker-info="44.788673,-93.205671">
					  <div style="display:none;">
					    <div class="ui-gmap-marker-info">
					  	  <h1><a id="gmap-marker-link" href="#">North Memorial Care</a></h1>
					  	  <p>8398 Jefferson Ct</p>
					  	</div>
					  </div>
	            	  <a href="#">
	            	  	<h1 class="ui-gmap-marker-title wrap">North Memorial Care</h1>
	            	  	</a><div class="ui-li-count">
	            	  		<span>0.71 miles</span>
	            	  	</div>
	            	  </a>
	            	</li>
	            	<li data-marker-info="44.750453,-93.204766">
					  <div style="display:none;">
					    <div class="ui-gmap-marker-info">
					  	  <h1><a id="gmap-marker-link" href="#">Fast Clinic-Newtown</a></h1>
					  	  <p>34555 Dove Trl</p>
					  	</div>
					  </div>
	            	  <a href="details.html?locationId=4719">
	            	  	<h1 class="ui-gmap-marker-title wrap">Fast Clinic-Newtown</h1>
	            	  	</a><div class="ui-li-count">
	            	  		<span>4.15 miles</span>
	            	  	</div>
	            	  </a>
	            	</li>
	            	<li data-marker-info="44.736285,-93.207487">
					  <div style="display:none;">
					    <div class="ui-gmap-marker-info">
					  	  <h1><a id="gmap-marker-link" href="#">Brad's Medical Clinic</a></h1>
					  	  <p>3444 Great Ave</p>
					  	</div>
					  </div>
	            	  <a href="#">
	            	  	<h1 class="ui-gmap-marker-title wrap">Brad's Medical Clinic</h1>
	            	  	</a><div class="ui-li-count">
	            	  		<span>5.09 miles</span>
	            	  	</div>
	            	  </a>
	            	</li>
	            	<li data-marker-info="44.723595,-93.176812">
					  <div style="display:none;">
					    <div class="ui-gmap-marker-info">
					  	  <h1><a id="gmap-marker-link" href="#">Super Clinics</a></h1>
					  	  <p>15560 Pilot Rd</p>
					  	</div>
					  </div>
	            	  <a href="#">
	            	  	<h1 class="ui-gmap-marker-title wrap">Super Clinics</h1>
	            	  	</a><div class="ui-li-count">
	            	  		<span>5.58 miles</span>
	            	  	</div>
	            	  </a>
	            	</li>
					<li id="show-more"><a href=""><h1>Voir plus</h1></a></li>								
				</ul>
			</div>
		</div>
		<div data-role="content" id="map-canvas" data-initial-view="44.80,-93.16,10" style="display:none;"></div><!-- Load map assets at bottom for performance -->
	
	<script type="text/javascript" src="jquery.gmap.js"></script>
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
	<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.0/src/infobox_packed.js"></script>			
	</div>
	
	</body>
	</html>
